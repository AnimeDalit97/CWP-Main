# triggered by UN Resolution Screen
je_declaration_of_human_rights = {
	icon = "gfx/interface/icons/cwp_icons/united_nations.dds"
	possible = {
		OR = {
			has_variable = un_member
			has_variable = unsc_member
		}
		NOT = {
			has_global_variable = declaration_of_human_rightscomplete
			has_global_variable = declaration_of_human_rightsfail
			has_global_variable = vetoed
		}
	}

	current_value = {
		value = pending_resolution_progress_value
	}

	goal_add_value = {
		add = 100
	}

	on_weekly_pulse = {
		effect = {
			change_global_variable = {
				name = pending_resolution_progress
				add = 0.1
			}
			#### Updates Diplo weight for countries		
			if = {
				limit = {
					has_variable = is_supporting
				}
				change_global_variable = {
					name = is_supporting_list
					add = diplomatic_weight
				}
			}
			if = {
				limit = {
					has_variable = is_opposing
				}
				change_global_variable = {
					name = is_opposing_list
					add = diplomatic_weight
				}
			}
		}
	}
	complete = {
		and = {
			scope:journal_entry = {
				is_goal_complete = yes
			}
			custom_tooltip = {
				text = "WILLCOMPLETEUN"
				un_support_value > un_oppose_value
			}
		}
	}

	fail = {
		or = {
			AND = {
				scope:journal_entry = {
					is_goal_complete = yes
				}
				custom_tooltip = {
					text = "WILLFAILUN"
					un_oppose_value > un_support_value
				}
			}
			custom_tooltip = {
				text = "ISVETOED"
				has_global_variable = vetoed
			}
		}
	}

	on_complete = {
		effect_reset_un_lists = yes
		set_global_variable = declaration_of_human_rightscomplete
		hidden_effect = {
			every_country = {
				trigger_event = { id = un_resolution_events.1 }
			}
		}
	}

	on_fail = {
		effect_reset_un_lists = yes
		set_global_variable = {
			name = declaration_of_human_rightsfail
			days = 365
		}
		hidden_effect = {
			every_country = {
				trigger_event =  { id = un_resolution_events.2 }
			}
		}
	}
	progressbar = yes
	weight = 100
}
